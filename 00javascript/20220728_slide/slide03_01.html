<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slide02_basic</title>
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<style>
    .wrapper{ width: 500px; margin: 0 auto; background: pink;  }
    .wrapper img{width: 100%;}
    .wrapper ul{position: relative; overflow: hidden; width: 500px; height: 200px;}
    .wrapper li{position: absolute; left: 100%; width: 100%;}
    .wrapper li:first-child{left: 0;}

</style>
<script>
    $(document).ready(function(){
       
        let current = 0;
        const liNum = $('.slide>li').length;
        let overBtn = true; //2중클릭 못하게
        // console.log(liNum)
     
        $('.next').click(function(e){
            e.preventDefault();
            if(overBtn == true){ //하나씩 동작
                overBtn = false; // 2번째는 작동 되지 않음

                $('.slide>li').eq(current).css({left:0}).stop().animate({left:"-100%"},1000);
                current++;
                if(current == liNum){
                    current = 0;
                } 
                $('.slide>li')
                    .eq(current)
                    .css({left:"100%"})
                    .stop()
                    .animate({left:0},1000,function(){
                        console.log("ok");
                    overBtn = true;
                });
             }
            console.log(current) // 더블클릭해도 한번만 작동
        });

        $('.prev').click(function(e){
            e.preventDefault();
            if(overBtn == true){ //하나씩 동작
                overBtn = false; // 2번째는 작동 되지 않음

            $('.slide>li').eq(current).css({left:0}).stop().animate({left:"100%"},1000);                     
            current--;
            if(current < 0){
                 current = liNum -1;
            }   
            $('.slide>li')
                    .eq(current)
                    .css({left:"-100%"})
                    .stop()
                    .animate({left:0},1000,function(){
                        console.log("ok");
                    overBtn = true;
                });
            }
            console.log(current) // 더블클릭해도 한번만 작동 
        });
        
  

        // 자동
        // setInterval(function(){
        //     $('.next').trigger("click")
        // },3000)


    })
</script>
<body>
    <div class="wrapper">
        <ul class="slide">
            <li><img src="../../images/images01.jpg" alt="img1"></li>
            <li><img src="../../images/images02.jpg" alt="img2"></li>
            <li><img src="../../images/images03.jpg" alt="img3"></li>
            <li><img src="../../images/images04.jpg" alt="img4"></li>
            <li><img src="../../images/images05.jpg" alt="img5"></li>
        </ul>
        <div>
            <a href="#" class="prev">prev</a>
            <a href="#" class="next">next</a>
        </div>
    </div>
 
</body>
</html>